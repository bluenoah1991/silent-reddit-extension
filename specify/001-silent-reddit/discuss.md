# 讨论主题: SilentReddit

> **重要说明：此文件仅用于维护讨论记录，不要添加其他内容。**

## 概述
这是一个Chrome插件，用来屏蔽Reddit网站上的广告和所有图片，以便于可以在办公时间浏览。

## 讨论记录
<!--
每次讨论记录格式：
### D01 - YYYY-MM-DD HH:MM:SS
**问题**: [讨论的具体问题]
**结论**: [达成的结论或决策]

编号格式: D01, D02, D03...（D = Discussion）
-->

### D01 - 2025-10-17 00:00:00
**问题**: 内容屏蔽的技术实现方案选择
**结论**: 采用CSS注入 + JavaScript增强的混合方案。具体决策包括：(1) 只屏蔽帖子中的缩略图和内嵌图片，保留头像、表情和UI图标；(2) 使用display: none完全隐藏图片元素；(3) 通过Content Script注入CSS并使用MutationObserver监听DOM变化，确保动态加载内容也被完全覆盖；(4) 广告识别采用基于DOM结构特征（CSS类名、data属性）的方案，查找包含"Promoted"标识的帖子元素进行屏蔽。

### D02 - 2025-10-17 01:00:00
**问题**: 如何避免文本依赖的选择器策略，以支持多语言环境
**结论**: 通过Playwright MCP实时分析Reddit DOM结构，发现了完全基于选择器的稳定方案：(1) 广告识别使用 `shreddit-ad-post` 自定义元素标签，完全语言无关；(2) 帖子图片通过 `article img` 选择器匹配，排除带有 `.shreddit-subreddit-icon__icon` class的社区图标；(3) 用户头像通过父元素链接特征识别（`a[href*="/user/"]` 内的img）；(4) 可选用更精确的slot属性选择器如 `[slot="thumbnail"]` 和 `[slot="image-gallery"]`。此方案避免了所有文本匹配（如"已推广"、"头像"等），确保跨语言稳定性。

### D03 - 2025-10-17 02:00:00
**问题**: 新项目需要建立完整的开发环境，包括版本控制、npm配置和Chrome扩展基础文件结构
**结论**: 采用简洁实用的项目结构方案：(1) 项目结构采用标准Chrome扩展目录布局，包含manifest.json、content.js、styles.css等核心文件，保持.github/prompts/和specify/的Senatus项目管理结构；(2) 开发工具链使用纯HTML/CSS/JavaScript，无需构建步骤，降低维护成本，适合办公场景快速部署；(3) 版本控制初始化Git仓库，配置.gitignore排除node_modules等临时文件；(4) npm配置创建基础package.json，保持零运行时依赖，可选添加web-ext作为开发依赖用于本地测试；(5) 文件组织扩展源码放在根目录，Senatus管理文件保持在.github/和specify/目录。

### D04 - 2025-10-17 03:00:00
**问题**: 如何方便地将插件部署到Chrome浏览器，是否可以创建npm task一键安装/更新插件到本地Chrome
**结论**: 经调研发现Chrome从33版本（Windows）起已禁止从本地CRX文件路径直接安装扩展，出于安全考虑。最终采用"构建到out目录+手动加载"方案：(1) 创建npm构建任务将扩展文件输出到out/目录；(2) 首次在chrome://extensions/开发者模式下加载out/目录；(3) 后续开发通过npm run build重新构建，在扩展管理页面点击刷新按钮更新；(4) 可选添加watch模式自动监听文件变化并重新构建；(5) .gitignore排除out/目录保持版本库干净。此方案简单可靠，符合标准Chrome扩展开发工作流，适合办公环境使用。

### D05 - 2025-10-17 04:00:00
**问题**: 图片屏蔽后应显示占位符而非直接删除，宽图占位符应使用低高度以节省空间，且打开的帖子内图片也需要处理
**结论**: 采用"隐藏媒体容器+文本占位符"方案：(1) 不直接删除图片，而是隐藏整个媒体容器（包括图片和背景），避免遗留黑色背景区域；(2) 在容器位置插入简单文本标签"[Image]"，提示用户此处原有图片；(3) 使用data属性标记已处理的容器，防止同一容器内多个图片重复创建占位符；(4) 扩展选择器覆盖范围，包括信息流、打开的帖子、评论区等多个位置的图片；(5) 继续保留用户头像、社区图标和小于32px的UI图标。此方案简洁不干扰阅读，占用空间最小。

---
*创建时间: 2025-10-17*
