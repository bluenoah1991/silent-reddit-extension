# 实现记录 - T24

## 任务信息
- **编号**: T24
- **描述**: 在media-blocker.js的showAll方法中添加恢复显示faceplate-gif元素的逻辑

## 实现细节

### 背景
在 T23 中实现了隐藏逻辑，本任务实现当用户禁用媒体屏蔽功能时恢复显示这些元素的逻辑。

### 修改内容

#### 在 media-blocker.js 的 showAll 方法中添加恢复逻辑

在 `showAll` 方法的末尾，添加了恢复 `faceplate-gif` 元素显示的处理：

```javascript
// Restore comment media
document.querySelectorAll(SilentReddit.SELECTORS.COMMENT_MEDIA_HIDDEN).forEach(media => {
    media.style.removeProperty('display');
    media.removeAttribute(SilentReddit.DATA_ATTRS.MEDIA_HIDDEN);
});

// Restore faceplate-gif elements
document.querySelectorAll(SilentReddit.SELECTORS.FACEPLATE_GIF_HIDDEN).forEach(gif => {
    gif.style.removeProperty('display');
    gif.removeAttribute(SilentReddit.DATA_ATTRS.MEDIA_HIDDEN);
});
```

### 技术说明

**处理流程**：
1. 使用 `document.querySelectorAll(SilentReddit.SELECTORS.FACEPLATE_GIF_HIDDEN)` 查找所有被隐藏的元素
2. 移除 `display` 样式属性，恢复原始显示状态
3. 移除 `data-sr-media-hidden` 标记属性

**选择器使用**：
- 使用 `FACEPLATE_GIF_HIDDEN` 选择器（即 `faceplate-gif[data-sr-media-hidden]`）
- 只恢复被本扩展标记为隐藏的元素，避免影响其他元素

**设计考虑**：
- 遵循项目现有的媒体恢复模式（与 COMMENT_MEDIA_HIDDEN 等处理一致）
- 使用 `removeProperty` 而非设置 `display: ''`，完全移除样式属性
- 移除标记属性后，元素可以再次被 hideAll 方法处理

**完整性保证**：
- hideAll 和 showAll 方法配对实现，确保功能可逆
- 标记属性的添加和移除保持一致
- 样式的设置和恢复保持一致

### 构建验证
- ✅ 运行 `npm run build` 构建成功
- ✅ 无编译错误和警告
- ✅ 代码风格符合项目规范（英文注释）

### 功能验证
- ✅ hideAll 和 showAll 方法逻辑配对完整
- ✅ 用户确认修复结果符合预期

---
*创建时间: 2025-10-19*
