---
description: 基于当前主题生成可执行的任务列表
---

**用户输入**: $ARGUMENTS

## 执行流程

1. **检查项目宪法**:
   - 读取宪法文件 `specify/constitution.md`（如存在）
   - 确保后续操作符合宪法约束

2. **获取当前主题**:
   - 扫描 `specify/` 目录找到最新主题目录（按序号排序）
   - 读取最新主题目录下的 `discuss.md` 文件了解内容
   - 如无主题目录则提示运行 `/senatus.new-topic` 并结束命令

3. **读取研究基础**:
   - 读取 `specify/{当前主题目录}/research.md` 文件（如存在）
   - 如研究文件不存在则建议先运行 `/senatus.research`
   - 基于现有研究结果分析项目现状

4. **检查已有实现记录**:
   - 检查 `specify/{当前主题目录}/implementation/` 目录是否存在
   - 如存在实现记录文件，读取所有已完成的实现内容
   - 统计已有实现记录的最大编号（例如 T05），确定起始编号
   - 这些是上一轮回滚前已完成的工作，需要基于此生成后续任务

5. **生成任务列表**:
   - 基于主题、已有讨论、研究基础、已有实现记录和项目源码分析
   - **如有用户输入，将其作为注意事项纳入考虑**
   - 整理所有结论和决策，识别具体任务事项
   - **严格遵循项目宪法约束**
   - 按执行顺序排列，分配编号：
     * 如有已实现记录，从最大编号+1开始（例如已有 T05，则从 T06 开始）
     * 如无已实现记录，从 T01 开始

6. **创建任务计划**:
   - 读取模板文件 `.specify/plan-template.md`
   - 替换模板占位符：
     * `{{DISCUSS_FILE_PATH}}` → 关联的 discuss.md 文件路径
     * `{{CURRENT_DATE}}` → 当前日期（YYYY-MM-DD）
   - 在任务清单部分填充生成的任务列表：
     ```markdown
     T01. [⏳待执行] 任务描述
     T02. [⏳待执行] 任务描述
     T03. [⏳待执行] 任务描述
     ```
   - **注意**：如有已实现任务，应一并列出（状态为✅已完成）
   - 生成目标文件 `specify/{当前主题目录}/plan.md`（如文件已存在则覆盖）


## 输出结果
- 生成的任务项数量
- 建议运行 `/senatus.implement` 开始实施