---
description: 自动识别当前进度并批量执行多个任务
---

## 执行流程

1. **检查项目宪法**:
   - 读取宪法文件 `specify/constitution.md`（如存在）
   - 确保后续操作符合宪法约束

2. **获取当前主题**:
   - 扫描 `specify/` 目录找到最新主题目录（按序号排序）
   - 读取最新主题目录下的 `discuss.md` 文件了解内容
   - 如无主题目录则提示运行 `/senatus.new-topic` 并结束命令

3. **读取研究基础**:
   - 读取 `specify/{当前主题目录}/research.md` 文件（如存在）
   - 如研究文件不存在则建议先运行 `/senatus.research`
   - 基于现有研究结果分析项目现状

4. **读取任务列表**:
   - 读取 `specify/{当前主题目录}/plan.md` 文件
   - 如任务文件不存在则提示运行 `/senatus.plan` 并结束命令
   - 解析任务列表，提取所有任务项及其状态

5. **识别待执行任务**:
   - 查找"⏳待执行"或"🔄进行中"任务项（按编号 T01, T02, T03...）
   - 如所有任务都已完成则显示完成状态并结束命令
   - 优先处理"🔄进行中"的任务，然后按编号顺序取出最多5个待执行任务

6. **读取实现记录**:
   - 读取 `specify/{当前主题目录}/implementation/` 目录下已完成任务的实现记录（如存在）

7. **批量执行任务**:
   - 对每个待执行任务依次进行：
     * 综合分析任务描述、主题、已有讨论、研究基础、实现记录
     * 结合项目源码和代码结构制定实施方案
     * **严格遵循项目宪法约束**
     * 逐步实施更改和测试验证
     * 根据完成情况更新状态为"✅已完成"或"🔄进行中"

8. **生成或更新实现记录**:
   - 为每个已执行任务生成或更新实现记录：
     * 在 `specify/{当前主题目录}/` 下创建 `implementation/` 目录（如不存在）
     * 读取模板文件 `.specify/implementation-template.md`
     * 替换模板占位符：
       - `{{TASK_ID}}` → 任务编号
       - `{{TASK_DESCRIPTION}}` → 任务描述
       - `{{IMPLEMENTATION_DETAILS}}` → 详细实现细节（包含变更的代码段，如为🔄进行中则说明已完成和未完成部分）
       - `{{CURRENT_DATE}}` → 当前日期（YYYY-MM-DD）
     * 生成目标文件 `specify/{当前主题目录}/implementation/{TASK_ID}.md`（如文件已存在则覆盖）

9. **更新任务计划**:
   - 更新 `specify/{当前主题目录}/plan.md` 文件中所有已完成任务的状态

## 输出结果
- 执行的任务编号和描述
- 每个任务的完成状态（✅已完成 或 🔄进行中）
- 如有🔄进行中任务，说明已完成和未完成部分
- 如还有待执行任务则建议继续执行 `/senatus.implement`